<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Classic Mines | CashMash</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/header.css" />
    <link rel="stylesheet" href="/css/footer.css" />
    <link rel="stylesheet" href="/css/mines.css" />
</head>

<body>
    <%- include('partials/header') %>

      <%- include('partials/gameLoader') %>


        <section class="mines-section">
            <div class="mines-game">
                <h2 class="neon-title">Mines</h2>


                <!-- ðŸ§© Grid -->
                <div id="grid" class="grid locked"></div>

                <!-- Status -->
                <div class="status">
                    Multiplier: <span id="multiplierDisplay">1.00x</span> |
                    Profit: <span id="profitDisplay">0</span>
                </div>

                <!-- âœ… Controls at the bottom -->
                <div class="game-controls">
                    <div class="controls-line1">
                        <div class="balance-container">
                            Balance: à§³<strong id="balance" data-raw-chips="<%= user.chips %>">
                            <%= formatBalance(user.chips) %>
                            </strong>
                        </div>
                        <input type="number" id="betInput" min="10" max="1000" value="10" placeholder="Bet" />
                        <select id="mineRate">
                            <option value="3">3 Mines</option>
                            <option value="5">5 Mines</option>
                            <option value="8">8 Mines</option>
                            <option value="10">10 Mines</option>
                            <option value="18">18 Mines</option>
                            <option value="24">24 Mines</option>
                        </select>
                    </div>
                    <div class="controls-line2">
                        <button id="newGameBtn" class="btn gold">Start</button>
                        <button id="cashOutBtn" class="btn gold" disabled>Cash Out</button>
                    </div>
                </div>

                <!-- Popup -->
                <div id="popupMessage" class="popup-message"></div>

            </div>
        </section>

        <%- include('partials/footer') %>
            <script src="/js/formatBalance.js"></script>
            <script src="/js/mines.js"></script>
            <script>
                const betInput = document.getElementById("betInput");
                betInput.addEventListener("input", () => {
                    let val = parseInt(betInput.value);
                    if (!val) return;
                    if (val < 10) betInput.value = 10;
                    if (val > 1000) betInput.value = 1000;
                });
            </script>
</body>

</html>